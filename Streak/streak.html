<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Streak Viewer — Firebase Sync with Login</title>
  <style>
    .day{ color: #e6eef8; }
    :root{ --bg:#0f1724; --card:#0b1220; --muted:#94a3b8; --accent:#7c3aed; --ok:#16a34a; --bad:#1f2937; --cell-size:44px; }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:#e6eef8;background:linear-gradient(180deg,#071027 0%, #071426 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .app{width:980px;max-width:96%;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);padding:18px;border-radius:14px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .title{display:flex;gap:12px;align-items:center}
    h1{font-size:18px;margin:0}
    .sub{color:var(--muted);font-size:13px}
    .controls{display:flex;gap:8px;align-items:center}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:8px 10px;border-radius:10px;cursor:pointer}
    .btn.primary{background:linear-gradient(90deg,var(--accent),#5b21b6);border:none;color:white}
    .calendar-wrap{display:flex;gap:14px;align-items:flex-start}
    .month-card{position:relative;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border-radius:12px;padding:12px;width:100%;max-width:680px;overflow:hidden}
    .month-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .month-title{font-weight:600}
    .grid{display:grid;grid-template-columns:repeat(7, var(--cell-size));gap:8px}
    .weekday{font-size:12px;color:var(--muted);text-align:center}
    .day{width:var(--cell-size);height:var(--cell-size);display:flex;align-items:center;justify-content:center;border-radius:8px;background:rgba(255,255,255,0.01);cursor:pointer;position:relative;transition:transform .12s ease, box-shadow .12s ease}
    .day:hover{transform:translateY(-4px)}
    .day.inactive{opacity:0.22;cursor:default}
    .day[data-state="done"]{color:white;border-color:#cacaca;background:linear-gradient(180deg, rgba(180,180,250,0.85), rgba(80,80,120,0.85));box-shadow:0 6px 18px rgba(124,58,237,0.08);}
    .day .n{font-size:12px}
    .legend{display:flex;gap:6px;align-items:center;color:var(--muted);font-size:13px;margin-top:8px}
    .legend .dot{width:12px;height:12px;border-radius:3px;background:linear-gradient(180deg, rgba(180,180,250,0.85), rgba(88,88,132,0.85))}
    aside{width:260px;min-width:220px}
    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));padding:12px;border-radius:12px}
    .stat{font-size:28px;font-weight:700}
    .muted{color:var(--muted);font-size:13px}
    .month-carousel{display:flex;gap:10px;align-items:center;overflow:hidden;padding:6px}
    .month-item{min-width:86px;padding:8px;border-radius:10px;text-align:center;cursor:pointer}
    .month-item.active{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03)}
    .footer{margin-top:12px;text-align:center;color:var(--muted);font-size:13px}
    #loginForm{margin-bottom:12px;display:flex;gap:8px;align-items:center}
    #loginForm input{padding:6px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:#1e293b;color:white}
    .loading-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(15,23,36,0.8);display:flex;align-items:center;justify-content:center;z-index:10;}
    .spinner{width:36px;height:36px;border:4px solid rgba(255,255,255,0.2);border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    @keyframes fadeInUp{0%{opacity:0;transform:translateY(10px);}100%{opacity:1;transform:translateY(0);}}
    .fadeInUp{animation:fadeInUp .3s ease forwards}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.15)}100%{transform:scale(1)}}
    .pulse{animation:pulse .4s ease}

/* ---------- Mobile ---------- */
@media (max-width: 720px) {
  body {
    padding: 12px;
    align-items: flex-start;
  }

  .app {
    width: 100%;
    padding: 14px;
    border-radius: 12px;
  }

  header {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }

  .controls {
    width: 100%;
    justify-content: space-between;
  }

  .calendar-wrap {
    flex-direction: column;
  }

  aside {
    width: 100%;
  }

  .panel {
    margin-top: 12px;
  }

  /* Calendar grid scaling */
  :root {
    --cell-size: 40px;
  }

  .grid {
    justify-content: center;
  }

  .month-card {
    max-width: 100%;
  }

  .day {
    border-radius: 10px;
    font-size: 14px;
  }

  .day .n {
    font-size: 13px;
  }

  /* Bigger tap targets */
  .btn {
    padding: 10px 12px;
  }

  /* Login form stacking */
  #loginForm {
    flex-direction: column;
    align-items: stretch;
  }

  #loginForm input {
    width: 100%;
  }

  /* Stats layout */
  #statsPanel > div:first-child {
    flex-direction: row;
    gap: 12px;
  }

  .stat {
    font-size: 24px;
  }

  .footer {
    margin-top: 16px;
  }
}

@media (max-width: 720px) {
  .btn.nav {
    padding: 10px 14px;
    font-size: 18px;
  }
}

@media (max-width: 720px) {
  .day[data-today="true"] {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
  }
}

/* Sticky Today FAB */
#stickyToday {
  position: fixed;
  bottom: 16px;
  right: 16px;
  z-index: 50;

  background: linear-gradient(90deg, var(--accent), #5b21b6);
  color: white;
  border: none;
  border-radius: 999px;
  padding: 12px 18px;

  font-size: 14px;
  font-weight: 600;
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  cursor: pointer;

  display: none;
}

/* Show only on mobile */
@media (max-width: 720px) {
  #stickyToday {
    display: block;
  }
}

/* Bottom sheet */
#sheetBackdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  z-index: 90;
  display: none;
}

#bottomSheet {
  position: fixed;
  left: 0;
  right: 0;
  bottom: -100%;
  z-index: 100;

  background: linear-gradient(180deg, #0b1220, #020617);
  border-radius: 16px 16px 0 0;
  padding: 12px 16px 20px;

  transition: bottom .25s ease;
}

#bottomSheet.open {
  bottom: 0;
}

.sheet-handle {
  width: 36px;
  height: 4px;
  background: rgba(255,255,255,0.25);
  border-radius: 999px;
  margin: 6px auto 12px;
}

.sheet-content h3 {
  margin: 0 0 6px;
}

.sheet-status {
  margin: 12px 0;
  font-weight: 600;
}

/* Only mobile */
@media (min-width: 721px) {
  #sheetBackdrop,
  #bottomSheet {
    display: none !important;
  }
}

/* Summary pill */
.summary-pill {
  margin: 8px 0 12px;
  padding: 10px 14px;
  border-radius: 999px;
  font-size: 14px;
  font-weight: 600;
  text-align: center;
  cursor: pointer;

  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;

  transition: transform .15s ease, opacity .15s ease;
}

.summary-pill.done {
  background: rgba(22, 163, 74, 0.15);
  color: #4ade80;
}

.summary-pill.undone {
  background: rgba(250, 204, 21, 0.15);
  color: #fde047;
}

.summary-pill.broken {
  background: rgba(239, 68, 68, 0.15);
  color: #fca5a5;
}

.summary-pill:active {
  transform: scale(0.97);
}

/* Mobile only */
@media (min-width: 721px) {
  .summary-pill {
    display: none !important;
  }
}

@keyframes pillPulse {
  0% { box-shadow: 0 0 0 0 rgba(250,204,21,0.4); }
  100% { box-shadow: 0 0 0 12px rgba(250,204,21,0); }
}

.summary-pill.undone {
  animation: pillPulse 1.5s infinite;
}


  </style>
</head>
<body>
  <div class="app" id="app">
    <form id="loginForm">
      <input type="email" id="email" placeholder="Email" required />
      <input type="password" id="password" placeholder="Password" required />
      <button type="submit" class="btn primary">Login</button>
    </form>

    <header>
      <div class="title">
        <div>
          <h1>Streak Viewer</h1>
          <div class="sub">Streaks synced with Firebase — login required</div>
        </div>
      </div>
      <div class="controls">
        <button class="btn primary" id="markDoneBtn">Mark Done</button>
        <button class="btn" id="todayBtn">Today</button>
        <button class="btn" id="clearBtn">Clear all</button>
        <button class="btn" id="logoutBtn" style="display:none">Logout</button>
      </div>
    </header>

    <div style="display:flex; gap:8px; align-items:center">
      <input type="text" id="streakName" name="streakName" value="">
      <button class="btn" id="renameBtn">Rename</button>
    </div>
    <div style="display:flex; gap:8px; align-items:center">
      <select id="streakSelect" class="btn">
        <option value="default">Default</option>
        <option value="Running">Running</option>
        <option value="Meditation">Meditation</option>
      </select>
<label style="display:flex;align-items:center;gap:6px">
  <input type="checkbox" id="publicToggle"> Public
</label>
  <button id="shareLinkBtn" class="btn" style="display:none">Copy Share Link</button>
      <button class="btn" id="newStreakBtn">+ Add Streak</button>

</div>


    <div class="calendar-wrap">
      <div class="month-card" aria-live="polite">
        <div class="loading-overlay" id="loadingOverlay" style="display:none"><div class="spinner"></div></div>
        <div class="month-header">
          <div style="display:flex;gap:8px;align-items:center">
            <button class="btn nav" id="prevMonth">◀</button>
            <div class="month-title" id="monthTitle">Month</div>
            <button class="btn nav" id="nextMonth">▶</button>
          </div>
          <div class="muted" id="rangeLabel">Showing</div>
        </div>
        <div id="summaryPill" class="summary-pill" style="display:none"></div>
        <div class="grid" style="margin-bottom:6px">
          <div class="weekday">Sun</div><div class="weekday">Mon</div><div class="weekday">Tue</div><div class="weekday">Wed</div><div class="weekday">Thu</div><div class="weekday">Fri</div><div class="weekday">Sat</div>
        </div>
        <div class="grid" id="daysGrid"></div>
        <div class="legend"><span class="dot"></span><span>Completed</span></div>
      </div>
      <aside>
        <div class="panel" id="statsPanel">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
            <div>
              <div class="muted">Current streak</div>
              <div class="stat" id="currentStreak">0</div>
            </div>
            <div>
              <div class="muted">Longest streak</div>
              <div class="stat" id="longestStreak">0</div>
            </div>
          </div>
          <div style="display:flex;gap:8px;justify-content:space-between;margin-top:10px">
            <div class="muted">Total days marked</div>
            <div id="totalMarked">0</div>
          </div>
        </div>
      </aside>
    </div>
    <div class="footer">Built with ❤️ and Firebase sync</div>
  </div>

<div id="sheetBackdrop"></div>

<div id="bottomSheet">
  <div class="sheet-handle"></div>

  <div class="sheet-content">
    <h3 id="sheetTitle">Streak</h3>
    <p id="sheetDate" class="muted"></p>

    <div id="sheetStatus" class="sheet-status"></div>

    <button id="sheetAction" class="btn primary" style="width:100%">
      Mark done
    </button>
  </div>
</div>


<button id="stickyToday" aria-label="Go to today">
  Today
</button>

  <script type="module" src="streak.js">
  </script>
</body>
</html>

