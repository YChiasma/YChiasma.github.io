<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Local Journal</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 700px; margin: auto; padding: 20px; }
    textarea { width: 100%; height: 120px; margin-bottom: 10px; }
    button { padding: 8px 16px; margin: 5px 0; cursor: pointer; }
    .entry { background: #f4f4f4; padding: 12px; margin-bottom: 10px; border-radius: 6px; position: relative; }
    .timestamp { font-size: 0.9em; color: #555; margin-bottom: 5px; }
    .delete-btn { background: #d9534f; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 0.8em; position: absolute; top: 10px; right: 10px; }
  </style>
</head>
<body>
  <h1>My Journal</h1>
  <textarea id="journalInput" placeholder="Write your thoughts..."></textarea><br>
  <button onclick="saveEntry()">Save Entry</button>

  <h2>Previous Entries</h2>
  <div id="entries"></div>

  <script>
    // Load saved entries from localStorage
    function loadEntries() {
      let entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
      let container = document.getElementById('entries');
      container.innerHTML = '';
      entries.slice().reverse().forEach((entry, index) => {
        let div = document.createElement('div');
        div.className = 'entry';
        let realIndex = entries.length - 1 - index; // correct index in array
        div.innerHTML = `
          <div class="timestamp">${entry.time}</div>
          <div>${entry.text}</div>
          <button class="delete-btn" onclick="deleteEntry(${realIndex})">Delete</button>
        `;
        container.appendChild(div);
      });
    }

    // Save a new entry
    function saveEntry() {
      let text = document.getElementById('journalInput').value.trim();
      if (!text) return;
      let entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
      let timestamp = new Date().toLocaleString();
      entries.push({ time: timestamp, text: text });
      localStorage.setItem('journalEntries', JSON.stringify(entries));
      document.getElementById('journalInput').value = '';
      loadEntries();
    }

    // Delete an entry by index with confirmation
    function deleteEntry(index) {
      if (!confirm('Are you sure you want to delete this entry?')) return;
      let entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
      entries.splice(index, 1);
      localStorage.setItem('journalEntries', JSON.stringify(entries));
      loadEntries();
    }

    // Load entries when page loads
    window.onload = loadEntries;
  </script>
</body>
</html>
